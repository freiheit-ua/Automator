# Automatron

Ця конфигурація допомогає запустити
https://github.com/E-Gideon/CyberReaper на AWS в автоматичному режимі

## Що треба зробити

### Встановити Terraform

Усі подробці, як встановити Terraform є на офіційній сторінкі. 
Оберіть Вашу операційну систему, та встановить Terraform.
За цим посиланням ви зможете знайти усю необхідну інформацію
https://learn.hashicorp.com/tutorials/terraform/install-cli

### Створити AWS аккаунт

Покрокова інструкція - як створити аккаунт на AWS
https://www.youtube.com/watch?v=2cufa1VSRMw

Після того як буде створенний аккаунт, потрібно зайти до IAM
та створити нового пользователя та надати йому права ```AdministratorAccess```

### Клонувати цей репозиторій

Відкрити файл `cyber-reaper.tf`

додати наступні данні

```
aws_key = ""
aws_secret = ""
```
також можно змінити регіон, де буде працювати сервер

Також потрібно перейти до EC2 -> Key Pairs та створити і скачати ключ.
Змінити права доступу до файлу Linux/Unix/MacOS це робиться `chmod 400 KEY.pem`

де **KEY.pem** - им'я ключа, який був створенний та скаченний з AWS

Додати ім'я цього ключа тут
```
key_name = ""
```

`count` скільки однакових інстансів ви хочете запустити

### Як запустити

Після клонування репозиторія, зайти в папку та виконати наступні команди 
* `terraform init`
* `terraform apply`

Через декілька хвилин ви побачити у консолі EC2 створенний новий інстанс.

### Як перевірити що все працює

Під'єднуємся до інстанса за допомогою команди 
* `ssh -i KEY.pem ec2-user@INSTANCE_IP`
* `sudo -i`
* `docker ps`
* `docker logs -f CONTAINER_ID`


* KEY.pem - створенний раніше та завантаженний ключ у EC2 -> Key Pairs
* INSTANCE_IP - адреса створенного інстанса
* CONTAINER_ID - ID контейнера який можна побачити за допомогою команди `docker ps`

